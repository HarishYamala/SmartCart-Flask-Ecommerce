{% extends "user/base.html" %}

{% block title %}Your Cart - SmartCart{% endblock %}

{% block extra_css %}
<link rel="stylesheet"
      href="{{ url_for('static', filename='css/cart.css') }}">
{% endblock %}

{% block content %}

<div class="cart-container">

    <h2>Your Cart</h2>

    {% if not cart %}
        <div class="empty-cart">
            <p>Your cart is empty.</p>
            <a href="{{ url_for('user_products') }}"
               class="shop-btn">
                Shop Now
            </a>
        </div>
    {% else %}

        {% for item in cart %}
        {% set pid = item.product_id %}
        <div class="cart-card">

            <img src="{{ url_for('static', filename='uploads/product_images/' + item.image) }}"
                 alt="{{ item.name }}">

            <div class="cart-details">
                <h3>{{ item.name }}</h3>
                <p>Price: ‚Çπ{{ item.price }}</p>
            </div>

            <div class="quantity-box">
                <a href="{{ url_for('decrease_quantity', pid=pid) }}"
                   class="qty-btn minus">-</a>

                <span>{{ item.quantity }}</span>

                <a href="{{ url_for('increase_quantity', pid=pid) }}"
                   class="qty-btn plus">+</a>
            </div>

            <div class="item-total">
                ‚Çπ{{ item.price * item.quantity }}
            </div>

            <a href="{{ url_for('remove_from_cart', pid=pid) }}"
               class="remove-btn">
                Remove
            </a>

        </div>
        {% endfor %}

        <div class="grand-total">
            Grand Total: ‚Çπ{{ grand_total }}
        </div>

        <div class="cart-actions">

            <a href="{{ url_for('user_products') }}"
               class="continue-btn">
                ‚Üê Continue Shopping
            </a>

            <!-- üî• IMPORTANT CHANGE HERE -->
            <a href="{{ url_for('user_address') }}"
               class="pay-btn">
                Proceed to Address ‚Üí
            </a>

        </div>

    {% endif %}

</div>

{% endblock %}
