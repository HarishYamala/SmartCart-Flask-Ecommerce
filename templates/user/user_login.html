{% extends "user/base.html" %}

{% block title %}SmartCart - Login{% endblock %}

{% block extra_css %}
<link rel="stylesheet"
      href="{{ url_for('static', filename='css/auth.css') }}">
{% endblock %}

{% block content %}

<div class="auth-wrapper">
    <div class="auth-container">
        <div class="auth-box">

            <h2>Welcome Back</h2>
            <p>Login to your SmartCart account</p>

            <!-- Flash Messages -->
            {% with messages = get_flashed_messages(with_categories=true) %}
              {% if messages %}
                {% for category, message in messages %}
                  <div class="flash-msg flash-message {{ category }}">
                      {{ message }}
                  </div>
                {% endfor %}
              {% endif %}
            {% endwith %}

            <form method="POST" action="/">

                <input type="email"
                       name="email"
                       placeholder="Email Address"
                       required>

                <input type="password"
                       name="password"
                       placeholder="Password"
                       required>

                <div class="forgot-link">
                    <a href="{{ url_for('forgot_password') }}">
                        Forgot Password?
                    </a>
                </div>

                <button type="submit">
                    Login
                </button>

            </form>

            <div class="auth-link">
                <a href="{{ url_for('user_register') }}">
                    Create Account
                </a>
                |
                <a href="{{ url_for('admin_login') }}">
                    Admin Login
                </a>
            </div>

        </div>
    </div>
</div>

<!-- Auto Hide Flash Messages After 5 Seconds -->
<script>
    setTimeout(function () {
        let alerts = document.querySelectorAll(".flash-message");
        alerts.forEach(function(alert) {
            alert.style.transition = "opacity 0.5s ease";
            alert.style.opacity = "0";
            setTimeout(() => alert.remove(), 500);
        });
    }, 5000);
</script>

{% endblock %}
