{% extends "user/base.html" %}

{% block title %}SmartCart - Products{% endblock %}

{% block extra_css %}
<link rel="stylesheet"
      href="{{ url_for('static', filename='css/products.css') }}">
{% endblock %}

{% block content %}

<!-- FILTER BAR -->
<div class="filter-bar">
    <form method="GET" class="filter-form">

        <select name="category">
            <option value="">All Categories</option>
            {% for cat in categories %}
            <option value="{{ cat.category }}"
                {% if request.args.get('category') == cat.category %} selected {% endif %}>
                {{ cat.category }}
            </option>
            {% endfor %}
        </select>

        <button type="submit">Filter</button>
    </form>
</div>

<!-- PRODUCTS -->
<div class="products-container">

    {% for product in products %}
    <div class="product-card">

        <div class="badge">Trending</div>

        <img src="{{ url_for('static', filename='uploads/product_images/' + product.image) }}"
             alt="{{ product.name }}">

        <div class="rating">
            4.3 ⭐
        </div>

        <h4>{{ product.name }}</h4>

        <p class="price">₹{{ product.price }}</p>

        <!-- ✅ FIXED ROUTE NAME HERE -->
        <a href="{{ url_for('product_details', product_id=product.product_id) }}"
           class="view-btn">
            View Product
        </a>

    </div>
    {% endfor %}

</div>

{% endblock %}
